{% extends "base.html" %}
{% load url from future %}
{% comment %}
must put this for url with quotes see https://docs.djangoproject.com/en/dev/intro/tutorial03/ note at the end
{% endcomment %}

{% block title %}polls{% endblock %}

{% block content_title %}polls{% endblock %}

{% block content %}
    <img src="{{ STATIC_URL }}polls/img/poll.jpg" alt="poll" />
    <div><a href="{% url 'poll_create' %}">create new poll</a></div>
    {% include "pagination.html" %}
    {% if polls %}
        <table border="1">
            <tr>
                <th>id</th>
                <th>question</th>
                <th>creator</th>
                <th>date published</th>
            </tr>
            {% for poll in polls %}
                <tr>
                    <th><a href="{% url 'poll_detail' poll.pk %}">{{ poll.pk }}</a></th>
                    <th><a href="{% url 'poll_detail' poll.pk %}">{{ poll.question }}</a></th>
                    <th>{% include "accounts/user_link.html" with username=poll.creator.username %}</th>
                    <th>{{ poll.pub_date }}</th>
                </tr>
            {% endfor %}
        </table> 
            {# list view: <ul><li><a href="{% url 'poll_detail' poll.id %}">{{ poll.question }}</a></li></ul> #}
            {# url is absolute magic: if looks for the polls.view.detail, and from the urlconf deduces (reverse) what is its url, supposing each view func has a single url #}
    {% else %}
        <p>there are no polls</p>
    {% endif %}
    {% include "pagination.html" %}
    <div><a href="{% url 'poll_create' %}">create new poll</a></div>
{% endblock %}
